***REMOVED***use strict***REMOVED***;

const TextChannel = require(***REMOVED***./TextChannel***REMOVED***);
const { Error } = require(***REMOVED***../errors***REMOVED***);

/**
 * Represents a guild news channel on Discord.
 * @extends {TextChannel}
 */
class NewsChannel extends TextChannel {
  _patch(data) {
    super._patch(data);

    // News channels don***REMOVED***t have a rate limit per user, remove it
    this.rateLimitPerUser = undefined;
  }

  /**
   * Adds the target to this channel***REMOVED***s followers.
   * @param {GuildChannelResolvable} channel The channel where the webhook should be created
   * @param {string} [reason] Reason for creating the webhook
   * @returns {Promise<NewsChannel>}
   * @example
   * if (channel.type === ***REMOVED***news***REMOVED***) {
   *   channel.addFollower(***REMOVED***222197033908436994***REMOVED***, ***REMOVED***Important announcements***REMOVED***)
   *     .then(() => console.log(***REMOVED***Added follower***REMOVED***))
   *     .catch(console.error);
   * }
   */
  async addFollower(channel, reason) {
    const channelID = this.guild.channels.resolveID(channel);
    if (!channelID) throw new Error(***REMOVED***GUILD_CHANNEL_RESOLVE***REMOVED***);
    await this.client.api.channels(this.id).followers.post({ data: { webhook_channel_id: channelID }, reason });
    return this;
  }
}

module.exports = NewsChannel;
